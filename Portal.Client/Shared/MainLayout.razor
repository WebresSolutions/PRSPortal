@inherits LayoutComponentBase
@inject IJSRuntime JSRuntime

<div class="page">
    <SideNav ToggleNav=ToggleNav Hide="@ToggleNav" />

    <div class="top-row @(headerVisible ? "header-visible" : "header-hidden")">
        <NavBar ShowNav="hideSidebar" ToggleNav=ToggleNav />
    </div>
    @* <QuickSearch /> *@
    <div class="@MainClass">
        @Body
    </div>
    @*     <footer>
        Built by <a href="https://webres.solutions" target="_blank" style="color: #b2424d;">Webres Solutions</a>
    </footer> *@
</div>

<MudThemeProvider />
<MudPopoverProvider />
<MudDialogProvider MaxWidth="MaxWidth.Large" />
<MudSnackbarProvider />

@code {
    private bool hideSidebar = false;
    private bool headerVisible = true;

    private void ToggleNav() => hideSidebar = !hideSidebar;

    private string MainClass => hideSidebar ? "main full" : "main";

    private string FullWidth => hideSidebar ? "full" : "";

    protected override async Task OnAfterRenderAsync(bool firstRender)
    {
        if (firstRender)
        {
            await JSRuntime.InvokeVoidAsync("initializeScrollHeader");
        }
    }
}
