@using Portal.Shared.DTO.Job

<Card ShowHeaderWithAddButton="true" HeaderTitle="Site Visits" OnAddButtonClick="OnAdd">
    <ChildContent>
        @if (SiteVisits.Count == 0)
        {
            <div class="empty-state">No records</div>
        }
        else
        {
            <div class="site-visits-container">
                @foreach (JobSiteVisitsDto visit in SiteVisits)
                {
                    <div class="site-visit-entry">
                        <div class="visit-field">
                            <span class="visit-label">Date</span>
                            <span class="visit-value">@visit.Start.Date.ToString("yyyy-MM-dd")</span>
                        </div>
                        <div class="visit-field">
                            <span class="visit-label">Time</span>
                            <span class="visit-value">@visit.GetStartEndAsString()</span>
                        </div>
                        <div class="visit-field">
                            <span class="visit-label">Assignees</span>
                            <span class="visit-value">@visit.GetAssigneesAsString()</span>
                        </div>
                        <div class="visit-field">
                            <span class="visit-label">Category</span>
                            <span class="visit-value">@visit.Category</span>
                        </div>
                        <div class="visit-field">
                            <span class="visit-label">Notes</span>
                            <span class="visit-value">@visit.Notes</span>
                        </div>
                    </div>
                }
            </div>
        }
    </ChildContent>
</Card>

@code {
    [Parameter]
    public List<JobSiteVisitsDto> SiteVisits { get; set; } = new();

    [Parameter]
    public EventCallback OnAdd { get; set; }
}

